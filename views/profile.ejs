<!doctype html>
<html>
<head>
    <title>21 Savage Fan Site</title>
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="stylesheet" href="style.css">
</head>
<body>
<div class="container">

    <div class="page-header text-center">
        <h1><span class="fa fa-anchor"></span> Profile Page</h1>
        <a href="/feed">Feed</a>
        <a href="/logout" class="btn btn-default btn-sm">Logout</a>
    </div>

    <div class="row">

       <!-- page to be able to post something -->
          <!-- routes to POST method /makePost -->
          <h2>Make A Post</h2>   
        <% if (user.local.email) { %>
          <!-- neeed enctype to let browser know that we expect there to be certain kinds of data like a file upload or image upload -->
          <form action="/makePost" enctype="multipart/form-data" method="POST"> 
            <input type="text" name="caption" placeholder="caption">
            <!-- input type set to file -->
            <!-- name property is going to be used in routes for POST method /makePost -->
            <input type="file" name="file-to-upload"> 
            <button type="submit">Submit</button>
          </form>
        </div>
        <% } %>

        <!-- LOCAL INFORMATION -->
        <!-- <div class="col-sm-6">
            <div class="well">
                <h3><span class="fa fa-user"></span> Local</h3>

                <% if (user.local.email) { %>
                    <p>
                        <strong>id</strong>: <%= user._id %><br>
                        <strong>email</strong>: <%= user.local.email %><br>
                        <strong>password</strong>: <%= user.local.password %>
                        <strong>Username</strong>: <%= user.local.name %>
                    </p>

                    <a href="/unlink/local" class="btn btn-default">Unlink</a>
                <% } else { %>
                    <a href="/connect/local" class="btn btn-default">Connect Local</a>
                <% } %>

            </div>
        </div> -->
        
        <div class="col-sm-6">
          <h3>Posts</h3>
          <ul class="messages">
            <!-- for loop that shows the signed in persons posts -->
            <% for(var i=0; i<posts.length; i++) {%>
          


                <div class="card bg-light mb-5 ">
                  <div class="card-body text-center">
                    <a href="/post/<%= posts[i]._id %>">
                      <img
                        src= "<%= posts[i].img %>"
                        class="mb-3 img-fluid"
                      />
                    </a>
                    <h3 class="card-title mb-3">
                      <strong>caption: </strong><%= posts[i].caption %>
                    </h3> 
                    <p class="card-text">
                      posted by: <a href="/page/<%= posts[i].postedBy %>"><%= posts[i].postedBy %></a>
                    </p>
                    <span><i class="fa fa-heart" aria-hidden="true"></i></span>
                    <span><%= posts[i].heartsUp %></span>
                  </div>
                </div>
            <% } %>

            

          </ul>

         

</div>

<script src="main.js"></script>

</body>
</html>
